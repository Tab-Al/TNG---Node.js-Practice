<html lang="en">
<head>
	
	<title>Profile - tNG</title>	
	<meta name="viewport" 
		content="width=device-width, initial-scale=1.0">
	
	<link href="/css/bootstrap.min.css" 
		rel="stylesheet" 
    	integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
    	crossorigin="anonymous">
	
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
		rel="stylesheet">

	<link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" 
		rel="stylesheet" 
		integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" 
		crossorigin="anonymous">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

	<link href="/css/footer.css" rel="stylesheet">
	
	<script src="/js/bootstrap.min.js">
	</script>

</head>

<!--
<body background="images/bkg/red2.jpg" style="margin-left: 60px; margin-right: 60px; margin-top: 30px;">




<div class="item">
  <h2 style="border: 2px solid #FFF056; padding:20px; margin-right: 100px;">My Account : </h2>
  <br>
  <p>ID : <%= user.id%> </p>
  <p>Wallet : <%= user.wallet%> Rs. </p>
  <p>Items Bought : <%= user.itemsbought%> </p>
  <p>Email : <%= user.email%> </p>
  <p>Phone : <%= user.phone%> </p>
  <p>B-Day : <%= user.dob%> </p>
	<form action='/addwallet' method="post">
		<input type="number" name="money" placeholder="Amt to add">
		<input type="submit">
	</form>
</div>
-->

<body style="background-color:#20c997;">
	<% include ./header.ejs %>
	
	<img class="img-fluid" src="/images/extra/iphone_banner.jpg" alt="Chania">
	
	<div class="container" style="background-color: #000">
		<div class="row p-4">
			<div class="col-3">
				<div class="card">
						<% if (user.profilePic) {%>
						<img
			    				class="card-img-top" style="width:100%"
			    				src="<%= user.profilePic %>">
						<% } else { %>
						<img
			    				class="card-img"
			    				src="/images/lap/L01.jpg">
			    		<% } %>
				</div>
			</div>
			<div class="col">
				<div class="card">
					<div class="card-body">
						<p class="card-text">
			      				<strong>Username : </strong><%=user.username%><br><br>
			      				<strong>Email : </strong><%= user.email%><br><br>
			      				<strong>Phone : </strong> 
		      						<% if (user.phone){ %>
			      					<%= user.phone %>
			      					<% } else { %>
			      						Not Available
			      					<% } %> 
			      					<button type="button" class="btn btn-link" data-toggle="modal" data-target="#updateInfo"><small>Update Info</small></button>

									<!--
										Update User Info
									-->
									<div class="modal" id="updateInfo">
									  <div class="modal-dialog">
									    <div class="modal-content">

									      <!-- Modal Header -->
									      <div class="modal-header">
									        <h4 class="modal-title">Update Phone Number</h4>
									        <button type="button" class="close" data-dismiss="modal">&times;</button>
									      </div>

										  <form action="/users/updateUserinfo" method="POST">
											<div class="modal-body">
									    	  <div class="form-group">
										          <label for="inputEmail">Email address</label>
										          <input
										          	readonly
										            name="email"
										            type="email" 
										            class="form-control" 
										            value="<%= user.email %>"
										           >
										        </div>

									    	  <div class="form-group">
											    <label for="username">New Username : </label>
											    <input name="username" type="text" class="form-control" id="username" value="<%= user.username%>">
											  </div>
											  <div class="form-group">
											    <label for="phone">New Phone:</label>
											    <input 
										            name="phone" 
										            class="form-control"
										            type="tel" 
										            minlength="10" 
										            maxlength="10" 
										            pattern="[0-9]{10}" 
										            value = "<%= typeof phone != 'undefined' ? phone : '' %>"
										          >
										      </div>
											 </div> 
											<!-- Modal footer -->
									      	<div class="modal-footer">
									        		<button type="submit" class="btn btn-primary">Submit</button>
									        </div>
										  </form>
									    </div>
									  </div>
									</div>

			      					<br><br>
			      		</p>
					</div>
				</div>
			</div>
		</div>
	</div>
<% include ./footer.ejs %>
<script src="/js/js.js"></script>
</body>
</html>
